<div class='container'>
  <%= render 'forms/errors', resource: resource %>

  <div class='row px-3'>
    <div class='col-12 mx-auto'>

      <h1 class='display-4'>
        Settings<span class='text-secondary'>:</span> <b>Account</b>
      </h1>

      <div class='row mt-5'>
        <div class='col-12 col-md-3 mb-5'>
          <%= render 'settings/subnav' %>
        </div>

        <div class='col-12 col-md-9 mb-5'>
          <%= form_for resource, as: resource_name, url: registration_path(resource_name), html: { method: :put } do |form| %>

            <fieldset class='border p-3 mb-5 bg-light'>
              <legend class='form-text'>Authentication</legend>

              <%= render "forms/labeled_password_field",
                          form:         form,
                          name:         :current_password,
                          autocomplete: "current-password",
                          note:         "We need your current password to confirm your changes." %>

              <%= render 'forms/labeled_email_field', form: form, name: :email %>

              <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                <div class='alert alert-warning'>
                  Currently waiting confirmation for:
                  <b><%= resource.unconfirmed_email %></b>.
                </div>
              <% end %>
            </fieldset>

            <fieldset class='border p-3 mb-5 bg-light'>
              <legend>Change your password</legend>
              <p class='form-text'>Leave blank if you don't want to change it.</p>

              <div class='row'>
                <div class='col'>
                  <%= render 'forms/labeled_password_field',
                              form: form,
                              name: :password,
                              label: 'New password' %>
                </div>

                <div class='col'>
                  <%= render 'forms/labeled_password_field',
                              form: form,
                              name: :password_confirmation,
                              label: 'Confirm new password' %>
                </div>
              </div>

              <%= render 'forms/password_note' %>
            </fieldset>

            <div class='mb-3 text-end'>
              <%= form.submit 'Save', class: 'btn btn-primary btn-lg' %>
            </div>
          <% end %>

          <% if false %>
          <div class='card text-white bg-danger mb-5' style='margin-top: 10rem'>
            <div class='card-header h3'>The Danger Zone™</div>

            <div class='card-body bg-light text-dark'>
              <h2 class='card-title text-danger h5'>
                Want to cancel your account?
              </h2>

              <p class='card-text'>
                You can do cancel your account at anytime.
                All of its associated data will be immediately and permanently deleted.
                There is <b>NO UNDO</b>.
              </p>

              <div class='text-right'>
                <%# TODO: Why is this deleting account when submitting new password form? %>
                <%= button_to 'Cancel my account',
                              registration_path(resource_name),
                              { data: { confirm: 'Are you sure you’re sure? There is NO UNDO.' }, method: :delete, class: 'btn btn-outline-danger' } %>

                <% if false %>
                  <%= button_to 'Cancel my account', registration_path(resource_name), { data: { confirm: 'Are you sure you’re sure? There is NO UNDO.' }, method: :delete, class: 'btn btn-outline-danger' } %> </div> </div>
                <% end %>
              </div>
            </div>
          </div>
          <% end %>

        </div>
      </div>

    </div>
  </div>
</div>
